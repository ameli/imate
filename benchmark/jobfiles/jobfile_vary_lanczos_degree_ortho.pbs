#! /bin/bash

#PBS -k o
#PBS -N lanc_deg
#PBS -o localhost:$PBS_O_WORKDIR/Log_ortho.log
#PBS -e localhost:$PBS_O_WORKDIR/Err_ortho.err
###PBS -j oe
#PBS -l cput=2880:00:00
#PBS -l walltime=144:00:00
#PBS -l nodes=1:ppn=20
#PBS -l mem=63GB
#PBS -q default
###PBS -m n
#PBS -M sameli@berkeley.edu

cd $PBS_O_WORKDIR

PYTHON_DIR=$HOME/programs/miniconda3
PACKAGE_DIR=$(dirname $PWD))
BENCHMARK_DIR=$PACKAGE_DIR/benchmark
LOG_DIR=$BENCHMARK_DIR

export OMP_NUM_THREADS=$SLURM_CPUS_PER_TASK
$PYTHON_DIR/bin/python ${BENCHMARK_DIR}/vary_lanczos_degree.py -o > ${LOG_DIR}/stream_output_vary_lanczos_degree_ortho.txt
